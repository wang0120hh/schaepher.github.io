<!DOCTYPE html>
<html>
    <head>
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.2.6 -->

    <!-- Title -->
    
    <title>
        
            Git的其他用法 | 
        
        Schaepher&#39;s Blog
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Meta & Info -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Schaepher">
    <meta name="description" content="Hi. I am Schaepher.">
    <meta name="keywords" content="null">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Schaepher&#39;s Blog">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://schaepher.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Git的其他用法 | Schaepher&#39;s Blog">
    <meta property="og:description" content="Hi. I am Schaepher.">

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS -->
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="/css/style.min.css">
    <!-- Config CSS -->


<!-- Other Styles -->
<style>
    body, html {
        font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    }

    a {
        color: #00838F;
    }

    .mdl-card__media,
    #search-label,
    #search-form-label:after,
    #scheme-Paradox .hot_tags-count,
    #scheme-Paradox .sidebar_archives-count,
    #scheme-Paradox .sidebar-colored .sidebar-header,
    #scheme-Paradox .sidebar-colored .sidebar-badge{
        background-color: #0097A7 !important;
    }

    /* Sidebar User Drop Down Menu Text Color */
    #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
    #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
        color: #0097A7 !important;
    }

    #post_entry-right-info,
    .sidebar-colored .sidebar-nav li:hover > a,
    .sidebar-colored .sidebar-nav li:hover > a i,
    .sidebar-colored .sidebar-nav li > a:hover,
    .sidebar-colored .sidebar-nav li > a:hover i,
    .sidebar-colored .sidebar-nav li > a:focus i,
    .sidebar-colored .sidebar-nav > .open > a,
    .sidebar-colored .sidebar-nav > .open > a:hover,
    .sidebar-colored .sidebar-nav > .open > a:focus,
    #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
        color: #0097A7 !important;
    }

    .toTop {
        background: #757575 !important;
    }

    .material-layout .material-post>.material-nav,
    .material-layout .material-index>.material-nav,
    .material-nav a {
        color: #757575;
    }

    #scheme-Paradox .MD-burger-layer {
        background-color: #757575;
    }

    #scheme-Paradox #post-toc-trigger-btn {
        color: #757575;
    }

    .post-toc a:hover {
        color: #00838F;
        text-decoration: underline;
    }
</style>


<!-- Theme Background Related-->

    <style>
        body{
            background-image: url(/img/bg.png);
        }
    </style>




<!-- Fade Effect -->

    <style>
        .fade {
            transition: all 800ms linear;
            -webkit-transform: translate3d(0,0,0);
            -moz-transform: translate3d(0,0,0);
            -ms-transform: translate3d(0,0,0);
            -o-transform: translate3d(0,0,0);
            transform: translate3d(0,0,0);
            opacity: 1;
        }

        .fade.out{
            opacity: 0;
        }
    </style>


    <script src="/js/jquery.min.js"></script>

    <link rel="stylesheet" href="/css/highlight/atom-one-dark.css">

    <!-- UC Browser Compatible-->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write('<link rel="stylesheet" href="/css/uc.css">');
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#目录："><span class="post-toc-number">1.</span> <span class="post-toc-text">目录：</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#减少【-git】文件夹的大小和文件数"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">减少【.git】文件夹的大小和文件数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#更换git-for-windows的文本编辑器"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">更换git for windows的文本编辑器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#修改已经提交的commit说明"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">修改已经提交的commit说明</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#合并commit"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">合并commit</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#解决merge时出现的冲突"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">解决merge时出现的冲突</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#回退一个merge"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">回退一个merge</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#获取某一commit的修改"><span class="post-toc-number">1.7.</span> <span class="post-toc-text">获取某一commit的修改</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#将低版本push到Github（删掉高版本Commit）"><span class="post-toc-number">1.8.</span> <span class="post-toc-text">将低版本push到Github（删掉高版本Commit）</span></a></li></ol></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script>
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').css('background-image', 'url(' + '/img/random/material-' + randomNum + '.png' + ')');
</script>

        
    
            <p class="article-headline-p">
                Git的其他用法
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Schaepher</strong>
        <span>1月 19, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Git的其他用法&url=https://schaepher.github.io//2017/01/19/GitImprove/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Git的其他用法&url=https://schaepher.github.io//2017/01/19/GitImprove/index.html&via=Schaepher" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://schaepher.github.io//2017/01/19/GitImprove/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://schaepher.github.io//2017/01/19/GitImprove/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="markdown-Github mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h2 id="目录："><a href="#目录：" class="headerlink" title="目录："></a>目录：</h2><ul>
<li><a href="#garbage_collection">减少【.git】文件夹的大小和文件数</a> </li>
<li><a href="#editor">更换git for windows的文本编辑器</a> </li>
<li><a href="#rebase_commit_msg">修改已经提交的commit说明</a></li>
<li><a href="#rebase_commit_merge">合并commit</a></li>
<li><a href="#conflict">解决merge时出现的冲突</a> </li>
<li><a href="#back">回退一个merge</a></li>
<li><a href="#pick">获取某一commit的修改</a></li>
<li><a href="#push_force">将低版本push到Github（删掉高版本Commit）</a></li>
</ul>
<hr>
<p><a name="garbage_collection"></a></p>
<h3 id="减少【-git】文件夹的大小和文件数"><a href="#减少【-git】文件夹的大小和文件数" class="headerlink" title="减少【.git】文件夹的大小和文件数"></a>减少【.git】文件夹的大小和文件数</h3><p>随着commit次数的增多，<code>.git</code>文件夹的文件数和文件夹大小都会不断增大。  </p>
<p>虽然对于小项目，增大的速度极慢，文件夹也基本在10M左右。但如果你和我一样，想减少该文件夹的文件数目（通常不少），可以试试这个命令。当然，git是鼓励你多使用这个命令的。见：<a href="https://git-scm.com/docs/git-gc" target="_blank" rel="external">Git - git-gc Documentation</a>  </p>
<blockquote>
<p>Users are encouraged to run this task on a regular basis within each repository to maintain good disk space utilization and good operating performance.  </p>
</blockquote>
<p>如何减少？特别简单，就是你进入到一个repository，也就是你项目的根目录，执行 <code>git gc</code> 就行了。  </p>
<p>我们来看看执行gc命令前后的对比：  </p>
<p>运行 <code>git gc</code> 前：  </p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170115214601697-480279175.jpg" alt=""></p>
<p>运行 <code>git gc</code> 后：  </p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170115214607510-1147295395.jpg" alt=""></p>
<p>文件夹大小变化不大。变化最大的是文件数目（2561 -&gt; 37)和文件夹数(274 -&gt; 18)。  </p>
<p>要讲清楚这个命令，涉及到了git是如何存储你的commit。这就要说到<code>快照（Snapshot）</code>。  </p>
<p>我们先看看git的官方说明：<a href="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-Git-%E5%9F%BA%E7%A1%80#直接记录快照，而非差异比较" target="_blank" rel="external">直接记录快照，而非差异比较</a>  </p>
<blockquote>
<p>每次你提交更新，或在 Git 中保存项目状态时，它主要对当时的全部文件制作一个快照并保存这个快照的索引。 为了高效，如果文件没有修改，Git 不再重新存储该文件，而是只保留一个链接指向之前存储的文件。 Git 对待数据更像是一个 快照流。  </p>
</blockquote>
<p>那么问题来了：什么是快照？  </p>
<p>来实际感受一下：  </p>
<p>首先我准备了一个大的文件，这样比较能说明问题。刚好今天整理一个文件，有55.3MB，就顺手拿来用了。  </p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170115230551416-1794822309.jpg" alt=""></p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170115230250728-753466185.jpg" alt=""></p>
<p>可以看到，源文件是55.3MB，而将其添加到仓库里后，仓库的大小变为46.3MB。这相当于是将整个文件复制到里面去。  </p>
<p>如果这还不能说明问题，再来一次。我删除了文件里的一大部分内容，将其减小至20.5MB。再将其提交到仓库里面。</p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170115230554228-184799821.jpg" alt=""></p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170115230257994-32768218.jpg" alt="">  </p>
<p>增加了19MB，跟20.5MB很接近。  </p>
<p>你可以在 <code>.git\objects\某个文件夹</code> 里找到这两份快照。  </p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170115232333431-1122489419.jpg" alt=""></p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170115232336666-222754137.jpg" alt=""></p>
<p>于是我们可以得出一个近似的结论：在git中，一份快照就是你当前工作目录的状态。当你使用add命令时，它将你当前工作目录的文件进行压缩，形成一份快照。</p>
<blockquote>
<p>不过，如果你有一些文件完全没有被修改过，它只保存指向之前版本的引用。这样可以减少快照所占用的空间。这里没有试验，但是官方对此有说明：<br>To be efficient, if files have not changed, Git doesn’t store the file again, just a link to the previous identical file it has already stored.</p>
</blockquote>
<p>那么这个时候我们再去执行 <code>git gc</code> ，会变成什么样呢？  </p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170115232735088-54497085.jpg" alt=""></p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170115233041025-752982170.jpg" alt=""></p>
<p>之前说的三个方面都有减少。  </p>
<p>我们再看看<code>.git\objects</code>里的文件夹（事先不知道它会删除文件夹，没有截图。。）  </p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170115233042431-557552073.jpg" alt=""></p>
<p>可以看到我们上面快照所在文件，即<code>02</code>和<code>f7</code>文件夹已经不在<code>objects</code>这个文件夹里面了。（info和pack两个文件夹一直都在那里）  </p>
<p>点进pack文件夹：  </p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170115233708353-128671852.jpg" alt="">  </p>
<p><code>.git</code> 文件夹的46.5M都在这里了。所以我们可以知道，git将之前两个文件夹的快照文件合并到一起了。</p>
<hr>
<p><a name="editor"></a></p>
<h3 id="更换git-for-windows的文本编辑器"><a href="#更换git-for-windows的文本编辑器" class="headerlink" title="更换git for windows的文本编辑器"></a>更换git for windows的文本编辑器</h3><p>git for windows默认使用vim作为文本编辑器，为此我专门写了篇vim的基本操作：<a href="http://www.cnblogs.com/schaepher/p/6284115.html" target="_blank" rel="external">vim编辑器的简单使用</a></p>
<p>如果你不想学习vim的使用，也可以把它换掉。  </p>
<p>例如我想把它换成<a href="https://atom.io/" target="_blank" rel="external">atom</a>：  </p>
<ol>
<li>先找到启动atom的exe文件的路径。我的在 <code>C:\Users\Schaepher\AppData\Local\atom\app-1.13.0\atom.exe</code>  </li>
<li>启动git for windows，执行<code>git config --global core.editor &quot;C:/Users/Schaepher/AppData/Local/atom/app-1.13.0/atom.exe --new-window --foreground --wait&quot;</code>   <blockquote>
<p>注意，这里路径的斜杠与Windows显示的相反，这是Linux的路径格式。<br>后面一串参数<code>--new-window --foreground --wait</code>是由各编辑器自己指定的。如果不这样指定，执行<code>git rebase -i commitId^</code>的时候会直接退出编辑。</p>
</blockquote>
</li>
</ol>
<hr>
<p><a name="rebase_commit_msg"></a></p>
<h3 id="修改已经提交的commit说明"><a href="#修改已经提交的commit说明" class="headerlink" title="修改已经提交的commit说明"></a>修改已经提交的commit说明</h3><p>先用<code>git log</code>查看commit信息：</p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170113151046056-967795774.png" alt=""></p>
<p>我打算更改下面那个commit，使用<code>git rebase -i 版本号^</code>：</p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170113151243947-791803325.png" alt=""></p>
<p>执行命令后，会进入这样的界面：</p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170113151051103-1707647553.png" alt="">  </p>
<p>它把我们传入的版本号之上的commit条目都显示出来了，这里只关注我们要改的那一条。将第一个<code>pick</code>修改为<code>reword</code>，保存并退出。  </p>
<p>过一会儿，它会再进入这样的界面：  </p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170113151055353-1678885020.png" alt="">  </p>
<p>将第一行的<code>Android的ListView</code>改为<code>这个更改后的message</code>，保存并退出。  </p>
<p>再用<code>git log</code>查看：</p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170113151102556-1969555440.png" alt=""></p>
<p>不仅commit message被更改了，从被更改的commit开始，commit id都会重新生成。</p>
<hr>
<p><a name="rebase_commit_merge"></a></p>
<h3 id="合并commit"><a href="#合并commit" class="headerlink" title="合并commit"></a>合并commit</h3><p>先用<code>git log</code>查看commit信息：</p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170113213803260-630487490.png" alt="">  </p>
<p>如果你想把最近的四个commit合并成一个commit，有两种方法。一种是用<code>git reset --soft d7ac</code>，在<code>git commit -m &quot;新的commit message&quot;</code>，另一种是用<code>git rebase</code>。接下来讲第二种。  </p>
<p>首先根据上图的commit id，我想把<code>afe14f</code>之后的commit合并到<code>afe14f</code>里面，执行 <code>git rebase -i afe14f^</code>。进入编辑界面：  </p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170113223346978-204618168.png" alt=""></p>
<p>根据提示，<code>squash</code>会把所在的commit合并到前一个commit上面。我们要合并到<code>afe14f</code>，所以修改后三个。而在合并之后，我们需要修改<code>afe14f</code>的commit message，所以使用<code>reword</code>。  </p>
<blockquote>
<p>你也可以用缩写，比如<code>squash</code>的缩写是<code>s</code>。而<code>reword</code>的缩写是<code>s</code>。</p>
</blockquote>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170113223351416-502078337.png" alt=""></p>
<p>保存并退出，会进入下一个界面。修改第一行的commit message，即<code>reword</code>的那个message，为<code>添加Android学习笔记，特别是ListView的介绍；添加对git commit的修改教程</code>。如下图：  </p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170113223355588-2133522629.png" alt="">  </p>
<p>保存并退出。自动进入下一个界面：  </p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170113223358525-387095125.png" alt="">  </p>
<p>此时要将其他三个message去掉，只要在那三行前面加<code>#</code>就行了。如下图：</p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170113223401775-1494057357.png" alt=""></p>
<p>保存并退出，等待git处理完成。  </p>
<p>再次使用<code>git log</code>查看commit信息：</p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201701/809218-20170114002320525-763331490.png" alt=""></p>
<p>完成！  </p>
<blockquote>
<p>这里貌似可以不使用<code>reword</code>，待实验。</p>
</blockquote>
<hr>
<p><a name="conflict"></a></p>
<h3 id="解决merge时出现的冲突"><a href="#解决merge时出现的冲突" class="headerlink" title="解决merge时出现的冲突"></a>解决merge时出现的冲突</h3><p>当你和其他团队成员对同一个文件进行修改后，merge的时候有可能会出现冲突。你可以打开每个冲突的文件，手工解决冲突；也可以借助冲突处理工具来解决冲突。这里分别介绍这两种方式：</p>
<ol>
<li><p>手工解决冲突</p>
<p> 冲突提示如下图所示：  </p>
<p> <img src="http://images2015.cnblogs.com/blog/809218/201511/809218-20151116223930593-1760266962.png" alt=""></p>
<p> CONFLICT表示有冲突，在这一行的末尾，显示冲突文件。这里有两个文件冲突，分别是README.md和app.iml<br> 这里以README.md为例，解决冲突： </p>
<p> <img src="http://images2015.cnblogs.com/blog/809218/201511/809218-20151116223851718-48866874.png" alt="">  </p>
<p> 被红框框住的符号 <code>=======</code> 是冲突的分割线。  </p>
<p> <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code> 和分割线之间的是本地的文本，分割线和 <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt; upstream/dev</code> 之间的是远程分支的文本  </p>
<p> 你可以选择保留其中一个版本的文本，然后将三个冲突符号都删除。这样表示已解决冲突。如果你想同时保留两个版本，那么只需将冲突符号删除。  </p>
<p> 解决冲突后如下图所示：  </p>
<p> <img src="http://images2015.cnblogs.com/blog/809218/201511/809218-20151116223256608-2077380872.png" alt=""></p>
</li>
<li><p>借助冲突处理工具<br> 个人认为Meld这个工具比较好用，Android Studio自带的冲突处理工具和它很相似。我用过tortoisegit的工具，感觉没有Meld好用，这里就不介绍了。</p>
<p> （1） 首先去Meld的官网下载安装文件并安装。-&gt;<a href="http://meldmerge.org/" target="_blank" rel="external">点此进入Meld官网</a></p>
<p> （2） 安装完后，打开你的git工具，比如msysgit。执行 <code>git config --edit --global</code> ，此时会打开一个配置文件。在文件最后添加以下四行：  </p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[merge]  </div><div class="line">         tool = meld  </div><div class="line">[mergetool &quot;meld&quot;] </div><div class="line">         path = e:/software/MeldMergeTool/Meld.exe</div></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>提示：path是根据你安装Meld的路径来决定的，同时要把路径中的 `\` 改成 `/` 。从上面可以看出我的安装路径为 `e:\software\MeldMergeTool\` 。 

（3） 在merge的时候，如果出现冲突，运行命令 `git mergetool` 这时就会打开Meld。

（4） Meld的界面如下：  

![](http://images2015.cnblogs.com/blog/809218/201511/809218-20151129212715813-1728290775.png)  

冲突的地方会显示红色，如果你想保留本地的代码，则点击左边的 `→` 箭头。  

把所有红色（冲突）区域解决后，可以根据实际情况去解决绿色（添加）和灰色（更改）。  

一般保存中间的修改就行。如上图红框处。
</code></pre><hr>
<p><a name="back"></a></p>
<h3 id="回退一个merge"><a href="#回退一个merge" class="headerlink" title="回退一个merge"></a>回退一个merge</h3><ol>
<li><p>如果是merge一个GitHub的Pull Request，可以进入要回退的那个Pull Request，在下面有一个revert按钮，可以用来revert一个Pull Request。如下图红框处：  </p>
<p> <img src="http://images2015.cnblogs.com/blog/809218/201511/809218-20151129214048063-2138029364.png" alt=""></p>
</li>
<li><p>在命令行里revert</p>
<p> （1）用 <code>git log</code> 看commit记录  </p>
<p> <img src="http://images2015.cnblogs.com/blog/809218/201511/809218-20151116223326421-1380239590.png" alt=""></p>
<p> 现在我们要回退 <code>commit 561dab</code> （也就是图中第一个commit），该commit将Pull Request #113 merge到项目中。</p>
<p> （2）使用 <code>git revert HEAD -m 1</code> 命令回退  </p>
<p> <img src="http://images2015.cnblogs.com/blog/809218/201511/809218-20151116223335155-387212738.png" alt=""></p>
<p> 如果是非merge的回退，用 <code>git revert 版本号</code> 就行了。但是这里是对merge操作进行revert，需要加上参数 <code>-m</code> 。命令最后加个 <code>1</code>。</p>
<p> 为什么要加上 <code>1</code> 呢？看上面<code>（1）</code>的图中的第二个红框，这个 <code>1</code> 对应红框中的 <code>6a3c30c</code> 版本。而如果填 <code>2</code> ，则对应 <code>b7831df</code> 。  </p>
<p> 继续看log，会发现 <code>6a3c30c</code> 是merge这个Pull Request之前的状态。而 <code>b7831df</code> 则是当前版本之前的一个merge。</p>
<p> 输入命令回车后，会跳出一个文本。  </p>
<p> <img src="http://images2015.cnblogs.com/blog/809218/201511/809218-20151116223342436-540832725.png" alt=""></p>
<p> 目前无视它就行。关闭文本，回到shell，回车。</p>
<p> <img src="http://images2015.cnblogs.com/blog/809218/201511/809218-20151116223354858-2073416423.png" alt=""></p>
<p> 回退成功！这个回退不会删除掉中间的commit记录，而是将这次revert作为一个commit加到commit记录上面。  </p>
</li>
</ol>
<hr>
<p><a name="pick"></a></p>
<h3 id="获取某一commit的修改"><a href="#获取某一commit的修改" class="headerlink" title="获取某一commit的修改"></a>获取某一commit的修改</h3><p>假设有commit <code>a b c</code> ，从左到右，<code>c</code> 为最新版。<br>这时你发现 <code>b</code> 的一个修改有问题，想回退到 <code>a</code> 。但是如果回退到 <code>a</code> ， <code>c</code> 的commit也会被取消。<br>这时可以用 <code>git cherry-pick 版本号</code> 这个命令获取 <code>c</code> 的commit。</p>
<p>下图是示例的log记录，从①可以看出，这里从②回退到⑤。</p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201511/809218-20151118150019671-1870975439.png" alt=""></p>
<p>现在我想获取④的commit。使用 <code>git cherry-pick 版本号</code> 将选定版本的提交合并到当前版本。</p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201511/809218-20151118150026327-2034885343.png" alt=""></p>
<hr>
<p><a name="push_force"></a></p>
<h3 id="将低版本push到Github（删掉高版本Commit）"><a href="#将低版本push到Github（删掉高版本Commit）" class="headerlink" title="将低版本push到Github（删掉高版本Commit）"></a>将低版本push到Github（删掉高版本Commit）</h3><p>有时候会因为各种原因，想要回退版本。如果没有关联Github或者没有push上去，那问题不大。但是如果你已经push到Github上了，这时候就比较尴尬了，因为普通的push是会被Github拒绝的。虽然Github提供了Revert功能，但是这并不能完全消去一个commit。  </p>
<p>先看看reset后被拒绝的样子：  </p>
<p><img src="http://images2015.cnblogs.com/blog/809218/201606/809218-20160604212640196-641381418.png" alt=""></p>
<p>解决方法就是：  </p>
<ol>
<li>先用 <code>git reset --hard 版本号</code> 回到你想要的版本  </li>
<li><p>执行 <code>git push --force</code><br> <img src="http://images2015.cnblogs.com/blog/809218/201606/809218-20160604212746321-1639371739.png" alt="">   </p>
<p> 再看看Github：  </p>
<p> <img src="http://images2015.cnblogs.com/blog/809218/201606/809218-20160604212804867-1594519594.png" alt="">  </p>
<blockquote>
<p>当然，一般是推荐用 <code>git push origin HEAD --force</code> 的，能防止因为其他没配置好而产生错误。对我来说差别并不大……</p>
</blockquote>
</li>
</ol>

    

    
</div>


                

                <!-- Post Comments -->
                
                    


    <!-- 使用 DISQUS -->
    <div id="disqus-comment">
        <div id="disqus_thread"></div>
<script>
    $('html').ready(function() {
        setTimeout(function() {
            var disqus_config = function () {
                this.page.url = 'https://schaepher.github.io/2017/01/19/GitImprove/index.html';  // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };

            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document;
                var s = d.createElement('script');
                s.src = '//null.disqus.com/embed.js';
                s.setAttribute('data-timestamp', + new Date());
                (d.head || d.body).appendChild(s);
            })();
        },1500);
    });
</script>

    </div>
    <style>
        #disqus-comment{
            background-color: #eee;
            padding: 2pc;
        }
    </style>


                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2017/01/19/GitHubTeam/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/01/19/GitAndGithub/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="Schaepher's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        schaepher@outlook.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    <li id="sidebar-first-li">
        <a href="/" target="_self">
            <i class="material-icons sidebar-material-icons">home</i>
            主页
        </a>
    </li>

    <!-- I'm Feeling Lucky -->
    <!--
    <li class="dropdown">
        <a href="" target="_self">
            <i class="material-icons sidebar-material-icons">explore</i>
             sidebar.imlucky
        </a>
    </li>
    -->

    <!-- Archives  -->
    <li class="dropdown">
        <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
            <i class="material-icons sidebar-material-icons">inbox</i>
             归档
            <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
            <li>
            <a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">4</span></a>
        </ul>
    </li>

    <!-- Categories  -->
    

    <!-- Divider -->
    <li class="divider"></li>


    <!-- Pages  -->
  	

    <!-- Article Numebr  -->
    <li>
        <a href="/archives">
            文章总数
            <span class="sidebar-badge">4</span>
        </a>
    </li>
</ul>


        <!-- Sidebar Divider -->
        <div class="sidebar-divider"></div>

        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Theme Material -->
<!-- <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
        主题 - Material
        <span class="sidebar-badge badge-circle">i</span>
    </div>
</a> -->

<!-- Help & Support -->
<!--
<a href="mailto:hiviosey@gmail.com" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
    sidebar.help
    <span class="mdl-button__ripple-container">
      <span class="mdl-ripple"></span>
    </span>
  </div>
</a>
-->

<!-- Feedback -->
<!--
<a href="https://github.com/viosey/hexo-theme-material/issues" target="_blank" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
         sidebar.feedback
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
</a>
-->

<!-- Abount Theme -->
<!--
<a href="https://blog.viosey.com/index.php/Material.html" target="_blank" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
         sidebar.about_theme
        <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
</a>-->

    </div>

    <!-- Sidebar Sponsor -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/schaepher" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-github.png);">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var fd = new Date();
                document.write(fd.getFullYear());
            </script>
            &nbsp;Schaepher's Blog
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->
<script src="/js/highlight.min.js"></script>
<script src="/js/js.min.js"></script>
<script src="/js/nprogress.js"></script>

<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();

    $('#nprogress .bar').css({
        'background': '#FF4081'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #FF4081, 0 0 15px #FF4081'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#FF4081',
        'border-left-color': '#FF4081'
    });

    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>











    <!-- 使用 DISQUS js 代码 -->
    <script id="dsq-count-scr" src="//null.disqus.com/count.js" async></script>



<!-- Swiftye -->


<!-- Local Search-->


<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->


                </main>
            </div>
        </body>
    
</html>
